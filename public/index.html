<!DOCTYPE html>
<html>
    <head>
        <title>Hello fastapi!</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <div id="message">
            <p>
                Enter your name: <br/>
                <input name="username" id="username"/>
            </p>
            <p>
                Enter your age: <br/>
                <input name="userage" id="userage" type="number"/>
            </p>
            <button onclick="send()">Send!</button>
        </div>
        <script>
            async function send() {
                const username = document.getElementById("username").value;
                const userage = document.getElementById("userage").value;

                const response = await fetch("/hello", {
                    method: "POST",
                    headers: {
                        "Accept": "application/json",
                         "Content-Type": "application/json"
                        },
                    body: JSON.stringify(
                        [
                            {name: "Tom", age: 38},
                            {name: "Bob", age: 20},
                            {name: "Kate", age: 25}
                        ]
                    )
                });

                if(response.ok) {
                    const data = await response.json();
                    document.getElementById("message").textContent = data.message;
                }
                else {
                    console.log(response);
                }
            }
        </script>
    </body>
</html>